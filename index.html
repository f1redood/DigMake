<script type="module">
  import Scene from "https://f1redood.github.io/Threed/Scene.js";
  import Vector2 from "https://f1redood.github.io/Threed/Vector2.js";
  import Vector3 from "https://f1redood.github.io/Threed/Vector3.js";
  import Vector4 from "https://f1redood.github.io/Threed/Vector4.js";
  import RenderBuffer from "https://f1redood.github.io/Threed/RenderBuffer.js";
  import Shader from "https://f1redood.github.io/Threed/Shader.js";

  var scene = new Scene(500, 500);
  scene.canvas.style.top = "50%";
  scene.canvas.style.left = "50%";
  scene.canvas.style.transform = "translate(-50%, -50%)";

  var buffer = new RenderBuffer(scene);

  var verts = [
    new Vector4(1, 1, 1, 1), new Vector4(1, 1, 1, -1), new Vector4(1, 1, -1, 1), new Vector4(1, 1, -1, -1),
    new Vector4(1, -1, 1, 1), new Vector4(1, -1, 1, -1), new Vector4(1, -1, -1, 1), new Vector4(1, -1, -1, -1),
    new Vector4(-1, 1, 1, 1), new Vector4(-1, 1, 1, -1), new Vector4(-1, 1, -1, 1), new Vector4(-1, 1, -1, -1),
    new Vector4(-1, -1, 1, 1), new Vector4(-1, -1, 1, -1), new Vector4(-1, -1, -1, 1), new Vector4(-1, -1, -1, -1),
  ];

  var inds = [
    0, 1, 2,
    2, 3, 0,
    
    4, 5, 6,
    6, 7, 4,

    8, 9, 10,
    10, 11, 8,

    12, 13, 14,
    14, 15, 12
  ];

  var uvs = [
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0),
    new Vector2(0, 0)
  ];

  var shader = new Shader();
  shader.createVertexShader(`var vec3 = new Vector3(data.aPos.x / data.aPos.w, data.aPos.y / data.aPos.w, data.aPos.z / data.aPos.w);
  data.position = new Vector2(vec3.x / vec3.z, vec3.y / vec3.z);`);
  shader.createFragmentShader("data.fragColor = new Vector4(0, 0, 0, 1);");

  buffer.loadData(verts, inds, uvs);
  buffer.loadShader(shader);
  buffer.render();
</script>
